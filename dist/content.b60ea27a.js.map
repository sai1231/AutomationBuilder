{"version":3,"sources":["content.js","../../../../usr/local/lib/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["$","document","ready","attrName","attrValueName","implicitNavigationThreshold","eventNamespace","listeners","isActive","isRecording","rawPages","pages","rawUsers","users","rawSteps","stepTemplates","steps","Steps","isElemPickerActive","isCollapsed","featureName","scenarioName","lastUserInteractionTime","Date","now","$iframeBody","Boundary","createBox","$iframe","addClass","loadBoxJS","chrome","extension","getURL","loadBoxCSS","$elementLabel","appendTo","body","$container","$stepsWrapper","$stepsText","prop","append","$steps","on","pickElement","$pickElemButton","stepId","attr","setClasses","find","toggleClass","closest","hideElementLabel","css","display","clickEventListener","event","$selectableChildren","wasChildClicked","filter","contains","target","length","elemName","step","console","error","setListeners","setCollapsed","_","set","replace","onStepsUpdated","preventDefault","stopPropagation","blur","mouseEnterEventListener","rect","getBoundingClientRect","text","position","zIndex","left","top","bottom","mouseLeaveEventListener","each","addEventListener","capture","removeEventListener","$input","paramName","val","$select","siblings","change","duplicate","scrollToBottom","remove","$addStep","type","addStep","renderStepPicker","options","map","category","template","key","group","startCase","unshift","html","join","$controls","$collapseToggle","$record","$copy","$download","$clear","toggleCollapsed","setIsRecording","stepsText","getCopyableSteps","getAll","copyText","setTimeout","window","prompt","filename","kebabCase","content","blob","Blob","blobUrl","URL","createObjectURL","send","url","saveAs","conflictAction","setSteps","listen","response","setActive","isImplicitNavigation","path","endsWith","substr","predicate","valueToMatch","value","isRegExp","test","page","findKey","unbindUserEvents","element_attr","value_attr","nav_threshold","updateStylesheet","bindUserEvents","setRawSteps","setRawPages","setRawUsers","newRawPages","safeEval","renderSteps","newRawUsers","newRawSteps","js","Function","undefined","newIsActive","showPane","addStylesheet","reloadSteps","removeStylesheet","resizeIframe","newIsCollapsed","height","contents","stepsFormatted","getFormattedSteps","removeClass","sortable","cursor","update","reorderSteps","disableSelection","reorderedSteps","$step","push","get","newIsRecording","renderRecordingState","params","add","newSteps","setAll","saveSteps","scrollTop","scrollHeight","stepTemplate","interpolated","getCopyableStep","prefix","reduce","stepText","paramValue","isStringValue","outputValue","index","match","param","id","optgroups","stringPresets","presets","preset","escape","string","info","user","element","className","success","contentWindow","select","execCommand","getSelection","removeAllRanges","is","containsInput","not","off","action","callback","runtime","sendMessage","onMessage","addListener","request","sender","sendResponse","listener","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","message","stack","overlay","createErrorOverlay","appendChild","getElementById","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","deps","cached","cache","some","cb"],"mappings":"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","file":"content.b60ea27a.js","sourceRoot":"..","sourcesContent":["$(document).ready(function() {\n\tvar attrName;\n\tvar attrValueName;\n\tvar implicitNavigationThreshold;  // in ms\n\n\tconst eventNamespace = 'gherkin-scenario-builder';\n\tconst listeners = [];\n\n\tvar isActive = false;\n\tvar isRecording = false;\n\tvar rawPages = '';\n\tvar pages = {};\n\tvar rawUsers = '';\n\tvar users = {};\n\tvar rawSteps = '';\n\tvar stepTemplates = [];\n\tvar steps = new Steps(stepTemplates);\n\tvar isElemPickerActive = false;\n\tvar isCollapsed = false;\n\tvar featureName = 'Example';\n\tvar scenarioName = 'Example';\n\tvar lastUserInteractionTime = Date.now();\n\n\tvar $iframeBody = Boundary.createBox('gherkin-scenario-builder');\n\tvar $iframe = $('#gherkin-scenario-builder');\n\n\t$iframe.addClass('--gherkin-scenario-builder hidden');\n\n    Boundary.loadBoxJS('#gherkin-scenario-builder', chrome.extension.getURL('vendor/iframeResizer.contentWindow.min.js'));\n\tBoundary.loadBoxCSS('#gherkin-scenario-builder', chrome.extension.getURL('vendor/fonts.css'));\n\tBoundary.loadBoxCSS('#gherkin-scenario-builder', chrome.extension.getURL('vendor/icons.css'));\n\tBoundary.loadBoxCSS('#gherkin-scenario-builder', chrome.extension.getURL('src/content.css'));\n\n\tvar $elementLabel = $('<div />')\n\t\t.addClass('--gherkin-scenario-builder-element-label')\n\t\t.appendTo(document.body);\n\n\tvar $container = $('<div />')\n\t\t.addClass('container')\n\t\t.appendTo($iframeBody);\n\n\tvar $stepsWrapper = $('<div />')\n\t\t.addClass('steps-wrapper')\n\t\t.appendTo($container);\n\n\tvar $stepsText = $('<textarea />')\n\t\t.addClass('steps-text')\n\t\t.prop('readonly', true)\n\t\t.appendTo($stepsWrapper);\n\n\t$stepsWrapper.append('<h2 class=\"steps-heading\">Scenario</h2>');\n\n\tvar $steps = $('<div />')\n\t\t.addClass('steps hidden')\n\t\t.appendTo($stepsWrapper);\n\n\t$container.on('click', '.js-pick-element', function pickElement() {\n\t\tconst $pickElemButton = $(this);\n\t\tconst stepId = $pickElemButton.attr('data-step-id');\n\n\t\tconst setClasses = () => {\n\t\t\t$(document).find('body').toggleClass('--gherkin-scenario-builder-show-elements', isElemPickerActive);\n\t\t\t$iframeBody.toggleClass('-picking-element', isElemPickerActive);\n\t\t\t$pickElemButton.toggleClass('-picking-element', isElemPickerActive);\n\t\t\t$pickElemButton.closest('.step').toggleClass('-picking-element', isElemPickerActive);\n\t\t};\n\n\t\tconst hideElementLabel = () => $elementLabel.css({ display: 'none' });\n\n\t\tconst clickEventListener = function(event) {\n\t\t\tconst $selectableChildren = $(this).find(`[${attrName}]`);\n\t\t\tconst wasChildClicked = $selectableChildren.filter(() => $.contains(this, event.target)).length > 0;\n\n\t\t\tif (wasChildClicked) {\n\t\t\t\t// Allows this click to pass through to the nested child element\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst elemName = $(this).attr(attrName);\n\t\t\tconst step = steps.find(stepId);\n\n\t\t\tif (!step) {\n\t\t\t\tconsole.error(`No step found for step ID = ${stepId}`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tisElemPickerActive = false;\n\t\t\tsetClasses();\n\t\t\tsetListeners();\n\t\t\tsetCollapsed(false);\n\t\t\thideElementLabel();\n\n\t\t\t_.set(step, 'params.element', elemName);\n\t\t\tsteps.replace(stepId, step);\n\t\t\tonStepsUpdated();\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.blur();\n\t\t};\n\n\t\tconst mouseEnterEventListener = function(event) {\n\t\t\tconst rect = this.getBoundingClientRect();\n\n\t\t\t$elementLabel\n\t\t\t\t.text($(this).attr(attrName))\n\t\t\t\t.css({\n\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\tzIndex: 999999,\n\t\t\t\t\tleft: rect.left,\n\t\t\t\t\ttop: rect.bottom,\n\t\t\t\t});\n\t\t};\n\n\t\tconst mouseLeaveEventListener = hideElementLabel;\n\n\t\tconst setListeners = () => {\n\t\t\t// Hijacks clicks on all possible elements\n\t\t\t// @todo Bug: When attrName changes, old event listeners are never removed\n\t\t\t$(document).find(`[${attrName}]`).each(function() {\n\t\t\t\tif (isElemPickerActive) {\n\t\t\t\t\tthis.addEventListener('click', clickEventListener, { capture: true });\n\t\t\t\t\tthis.addEventListener('mouseenter', mouseEnterEventListener, { capture: true });\n\t\t\t\t\tthis.addEventListener('mouseleave', mouseLeaveEventListener, { capture: true });\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.removeEventListener('click', clickEventListener, { capture: true });\n\t\t\t\t\tthis.removeEventListener('mouseenter', mouseEnterEventListener, { capture: true });\n\t\t\t\t\tthis.removeEventListener('mouseleave', mouseLeaveEventListener, { capture: true });\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tisElemPickerActive = !isElemPickerActive;\n\t\tsetClasses();\n\t\tsetListeners();\n\t});\n\n\t$container.on('change', '.pick-string, .pick-number', function() {\n\t\tconst $input = $(this);\n\t\tconst stepId = $input.attr('data-step-id');\n\t\tconst step = steps.find(stepId);\n\t\tconst paramName = $input.attr('data-param-name');\n\n\t\tif (step) {\n\t\t\t_.set(step, `params.${paramName}`, $input.val());\n\t\t\tsteps.replace(stepId, step);\n\t\t\tonStepsUpdated();\n\t\t}\n\t\telse {\n\t\t\tconsole.error(`No step found for step ID = ${stepId}`);\n\t\t}\n\t});\n\n\t$container.on('change', '.pick-string-preset', function() {\n\t\tconst $select = $(this);\n\t\tconst $input = $select.siblings('.pick-string');\n\n\t\t$input.val($input.val() + $select.val());\n\t\t$select.val('');\n\t\t$input.change();\n\t});\n\n\t$container.on('change', '.pick-page', function() {\n\t\tconst $select = $(this);\n\t\tconst $input = $select.siblings('.pick-string');\n\n\t\t$input.val($select.val());\n\t\t$select.val('');\n\t\t$input.change();\n\t});\n\n\t$container.on('change', '.pick-user', function() {\n\t\tconst $select = $(this);\n\t\tconst $input = $select.siblings('.pick-string');\n\n\t\t$input.val($select.val());\n\t\t$select.val('');\n\t\t$input.change();\n\t});\n\n\t$container.on('click', '.js-copy-step', function() {\n\t\tconst stepId = $(this).closest('[data-step-id]').attr('data-step-id');\n\t\tsteps.duplicate(stepId);\n\t\tonStepsUpdated();\n\t\tscrollToBottom();\n\t});\n\n\t$container.on('click', '.js-remove-step', function() {\n\t\tconst stepId = $(this).closest('[data-step-id]').attr('data-step-id');\n\t\tsteps.remove(stepId);\n\t\tonStepsUpdated();\n\t});\n\n\t/*\n\t\t\"Add step\" dropdown\n\t */\n\n\tvar $addStep = $(`<select name=\"add_step\" class=\"add-step\"></select>`).appendTo($stepsWrapper);\n\n\t$addStep.on('change', () => {\n\t\tconst type = $addStep.find('option:selected').val();\n\t\taddStep(type);\n\t\t$addStep.val('');\n\t});\n\n\tfunction renderStepPicker() {\n\t\tlet options = _.map(stepTemplates, (steps, category) => {\n\t\t\tlet options = _.map(steps, (template, key) => `<option value=\"${category}.${key}\">${template}</option>`);\n\t\t\tlet group = `<optgroup label=\"${_.startCase(category)}\">${options}</optgroup>`;\n\t\t\treturn group;\n\t\t});\n\t\toptions.unshift('<option value=\"\" disabled selected>Add a step...</option>');\n\n\t\t$addStep.html(options.join(''));\n\t}\n\n\t/*\n\t\tControls\n\t */\n\n\tvar $controls = $('<div />')\n\t\t.addClass('controls clearfix')\n\t\t.appendTo($container);\n\n\tvar $collapseToggle = $('<button type=\"button\" />')\n\t\t.html('<i class=\"icon icon-collapse\"></i><i class=\"icon icon-expand\"></i>')\n\t\t.addClass('collapse-toggle')\n\t\t.appendTo($container);\n\n\tvar $record = $('<button type=\"button\" />')\n\t\t.addClass('btn record')\n\t\t.appendTo($controls);\n\n\tvar $copy = $('<button type=\"button\" />')\n\t\t.addClass('btn copy')\n\t\t.html('<i class=\"icon icon-copy\"></i> Copy')\n\t\t.appendTo($controls);\n\n\tvar $download = $('<button type=\"button\" />')\n\t\t.addClass('btn download')\n\t\t.html('<i class=\"icon icon-download\"></i> Download')\n\t\t.appendTo($controls);\n\n\tvar $clear = $('<button type=\"button\" />')\n\t\t.addClass('btn clear')\n\t\t.html('<i class=\"icon icon-trashcan\"></i> Clear')\n\t\t.appendTo($controls);\n\n\t$collapseToggle.on('click', toggleCollapsed);\n\n\t$record.on('click', () => {\n\t\tsetIsRecording(!isRecording);\n\t});\n\n\t$copy.on('click', () => {\n\t\tlet stepsText = getCopyableSteps(steps.getAll());\n\t\t$stepsText.val(stepsText);\n\t\tcopyText($iframe, $stepsText);\n\t\t$copy.html('<i class=\"icon icon-copy\"></i> Copied');\n\t\tsetTimeout(() => {\n\t\t\t$copy.html('<i class=\"icon icon-copy\"></i> Copy');\n\t\t}, 2000);\n\t});\n\n\t$download.on('click', () => {\n\t\tfeatureName = window.prompt('Enter a title for the feature:', featureName);\n\t\tscenarioName = window.prompt('Enter a title for the scenario:', scenarioName);\n\n\t\tconst filename = _.kebabCase(featureName) + '.feature';\n\t\tconst stepsText = getCopyableSteps(steps.getAll());\n\t\tconst content = `Feature: ${featureName}\n===\n\n\nScenario: ${scenarioName}\n---\n${stepsText}\n`;\n\t\tconst blob = new Blob([content], { type: 'text/plain;charset=UTF-8' });\n\t\tconst blobUrl = URL.createObjectURL(blob);\n\n\t\tsend('download', {\n\t\t\turl: blobUrl,\n\t\t\tfilename: filename,\n\t\t\tsaveAs: true,\n\t\t\tconflictAction: 'overwrite',\n\t\t});\n\t});\n\n\t$clear.on('click', () => {\n\t\tsetSteps([]);\n\t});\n\n\tlisten('setActive', response => {\n\t\tsetActive(response.isActive);\n\t});\n\n\tlisten('setRecording', response => {\n\t\tsetIsRecording(response.isRecording);\n\t});\n\n\tlisten('navigate', response => {\n\t\t// implicit = user clicked a tracked link/button that triggered navigation\n\t\tconst isImplicitNavigation = (Date.now() - lastUserInteractionTime) < implicitNavigationThreshold;\n\n\t\tif (isImplicitNavigation) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst path = response.path.endsWith('/') ? response.path.substr(0, response.path.length - 1) : response.path;  // Removes trailing slash\n\t\tconst predicate = valueToMatch => value => _.isRegExp(value) ? value.test(valueToMatch) : value === valueToMatch;\n\t\tconst page = _.findKey(pages, predicate(path)) || _.findKey(pages, predicate(response.url)) || response.url;\n\t\taddStep('actions.navigate', { page });\n\t});\n\n\tsend('getActive', {}, response => {\n\t\tsetActive(response.isActive);\n\t});\n\n\tsend('getRecording', {}, response => {\n\t\tsetIsRecording(response.isRecording);\n\t});\n\n\tsend('getOptions', {}, options => {\n\t\tunbindUserEvents();\n\n\t\toptions = options || {};\n\t\tattrName = options.element_attr || attrName;\n\t\tattrValueName = options.value_attr || attrValueName;\n\t\timplicitNavigationThreshold = options.nav_threshold || implicitNavigationThreshold;\n\n\t\tif (isActive) {\n\t\t\tupdateStylesheet();\n\t\t\tbindUserEvents();\n\t\t}\n\n\t\tsetRawSteps(options.steps);\n\t\tsetRawPages(options.pages);\n\t\tsetRawUsers(options.users);\n\t});\n\n\tlisten('setOptions', options => {\n\t\tif (attrName !== options.element_attr\n\t\t\t|| attrValueName !== options.value_attr\n\t\t\t|| implicitNavigationThreshold !== options.nav_threshold\n\t\t) {\n\t\t\tunbindUserEvents();\n\t\t\tattrName = options.element_attr;\n\t\t\tattrValueName = options.value_attr;\n\t\t\timplicitNavigationThreshold = options.nav_threshold;\n\t\t\tbindUserEvents();\n\t\t\tupdateStylesheet();\n\t\t}\n\n\t\tsetRawSteps(options.steps);\n\t\tsetRawPages(options.pages);\n\t\tsetRawUsers(options.users);\n\t});\n\n\tfunction setRawPages(newRawPages) {\n\t\tif (newRawPages === rawPages) {\n\t\t\t// No change\n\t\t\treturn;\n\t\t}\n\n\t\trawPages = newRawPages;\n\t\tpages = safeEval(rawPages) || {};\n\t\trenderSteps();\n\t}\n\n\tfunction setRawUsers(newRawUsers) {\n\t\tif (newRawUsers === rawUsers) {\n\t\t\t// No change\n\t\t\treturn;\n\t\t}\n\n\t\trawUsers = newRawUsers;\n\t\tusers = safeEval(rawUsers) || {};\n\t\trenderSteps();\n\t}\n\n\tfunction setRawSteps(newRawSteps) {\n\t\tif (newRawSteps === rawSteps) {\n\t\t\t// No change\n\t\t\treturn;\n\t\t}\n\n\t\trawSteps = newRawSteps;\n\t\tstepTemplates = safeEval(rawSteps) || {};\n\t\tsteps = new Steps(stepTemplates);\n\t\trenderStepPicker();\n\t\trenderSteps();\n\t}\n\n\tfunction safeEval(js) {\n\t\tvar value;\n\n\t\ttry {\n\t\t\tvalue = Function(`'use strict'; return (${js})`)();\n\t\t}\n\t\tcatch (error) {\n\t\t\tvalue = undefined;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tfunction setActive(newIsActive) {\n\t\tisActive = newIsActive;\n\t\tshowPane(isActive);\n\n\t\tif (isActive) {\n\t\t\tbindUserEvents();\n\t\t\taddStylesheet();\n\t\t\treloadSteps();\n\t\t}\n\t\telse {\n\t\t\tunbindUserEvents();\n\t\t\tremoveStylesheet();\n\t\t}\n\t}\n\n\tfunction showPane(isActive) {\n\t\t$iframe.toggleClass('hidden', !isActive);\n\t\tresizeIframe();\n\t}\n\n\tfunction toggleCollapsed() {\n\t\tsetCollapsed(!isCollapsed);\n\t}\n\n\tfunction setCollapsed(newIsCollapsed) {\n\t\tisCollapsed = newIsCollapsed;\n\t\t$collapseToggle.toggleClass('-collapsed', isCollapsed);\n\t\t$container.toggleClass('-collapsed', isCollapsed);\n\t\t$iframe.toggleClass('--gherkin-scenario-builder-collapsed', isCollapsed);\n\n\t\tif (!isCollapsed) {\n\t\t\tresizeIframe();\n\t\t\tsetTimeout(resizeIframe, 50);\n\t\t}\n\t}\n\n\tfunction resizeIframe() {\n\t\tconst height = $iframe.contents().find('.container').height();\n\t\t$iframe.css('height', height);\n\t}\n\n\tfunction renderSteps() {\n\t\tlet stepsFormatted = getFormattedSteps(steps.getAll());\n\n\t\tif (stepsFormatted.length) {\n\t\t\t$steps.html(stepsFormatted.join(''));\n\t\t\t$steps.removeClass('hidden');\n\t\t\t$steps.removeClass('hidden');\n\t\t\t$steps.sortable({\n\t\t\t\tcursor: '-webkit-grabbing',\n\t\t\t\tupdate: reorderSteps,\n\t\t\t});\n\t\t\t$steps.disableSelection();\n\t\t}\n\t\telse {\n\t\t\t$steps.addClass('hidden');\n\t\t}\n\n\t\t$container.toggleClass('-has-steps', stepsFormatted.length > 0);\n\n\t\tresizeIframe();\n\t}\n\n\tfunction reorderSteps() {\n\t\tvar reorderedSteps = [];\n\n\t\t$steps.find('.step').each(function() {\n\t\t\tlet $step = $(this);\n\t\t\tlet stepId = $step.attr('data-step-id');\n\t\t\treorderedSteps.push(steps.get(stepId));\n\t\t});\n\n\t\tsetSteps(reorderedSteps);\n\t}\n\n\tfunction setIsRecording(newIsRecording) {\n\t\tisRecording = newIsRecording;\n\t\tsend('setRecording', { isRecording });\n\t\trenderRecordingState();\n\t}\n\n\tfunction renderRecordingState() {\n\t\t$container.toggleClass('-recording', isRecording);\n\n\t\tconst text = isRecording ? 'Recording' : 'Record';\n\t\t$record.html(`<i class=\"icon icon-media-record\"></i>${text}`);\n\t}\n\n\tfunction addStep(type, params = {}) {\n\t\tsteps.add(type, params);\n\t\tonStepsUpdated();\n\t\tscrollToBottom();\n\t}\n\n\tfunction setSteps(newSteps) {\n\t\tsteps.setAll(newSteps);\n\t\tonStepsUpdated();\n\t}\n\n\tfunction onStepsUpdated() {\n\t\tsaveSteps();\n\t\trenderSteps();\n\t}\n\n\tfunction saveSteps() {\n\t\tsend('setSteps', { steps: steps.getAll() });\n\t}\n\n\tfunction reloadSteps() {\n\t\tsend('getSteps', {}, response => {\n\t\t\tsetSteps(response.steps);\n\t\t});\n\t}\n\n\tfunction scrollToBottom() {\n\t\t$steps.get(0).scrollTop = $steps.get(0).scrollHeight;\n\t}\n\n\tfunction getCopyableSteps(steps) {\n\t\treturn _(steps)\n\t\t\t.map(step => {\n\t\t\t\tconst stepTemplate = _.get(stepTemplates, step.type);\n\t\t\t\tconst interpolated = getCopyableStep(stepTemplate, step.params);\n\t\t\t\tconst prefix = _.startCase(step.prefix);\n\t\t\t\treturn `${prefix} ${interpolated}`;\n\t\t\t})\n\t\t\t.join('\\n');\n\t}\n\n\tfunction getCopyableStep(stepTemplate, params) {\n\t\treturn _.reduce(params, (stepText, paramValue, paramName) => {\n\t\t\tconst isStringValue = (paramName === 'string' || paramName === 'element' || paramName === 'page' || paramName === 'user');\n\t\t\tconst outputValue = isStringValue ? `\"${paramValue}\"` : paramValue;\n\t\t\treturn stepText.replace(`{${paramName}}`, outputValue);\n\t\t}, stepTemplate);\n\t}\n\n\tfunction getFormattedSteps(steps) {\n\t\treturn _.map(steps, (step, index) => {\n\n\t\t\ttext = step.template.replace(/\\{(string|page|user|int|float|element)\\}/g, (match, param) => {\n\t\t\t\tif (param === 'int' || param === 'float') {\n\t\t\t\t\treturn `<input type=\"number\" class=\"pick-number\" data-step-id=\"${step.id}\" data-param-name=\"${param}\" value=\"${step.params[param] || 0}\">`;\n\t\t\t\t}\n\t\t\t\telse if (param === 'string') {\n\t\t\t\t\tconst optgroups = _.map(stringPresets, (presets, category) => {\n\t\t\t\t\t\tconst options = _.map(presets, preset => `<option value=\"${_.escape(preset)}\">${_.escape(preset)}</option>`);\n\t\t\t\t\t\treturn `<optgroup label=\"${_.startCase(category)}\">${options}</optgroup>`;\n\t\t\t\t\t});\n\n\t\t\t\t\treturn `\n\t\t\t\t\t\t<input type=\"text\" class=\"pick-string\" data-step-id=\"${step.id}\" data-param-name=\"string\" value=\"${step.params.string || ''}\">\n\t\t\t\t\t\t<select class=\"pick-string-preset\">\n\t\t\t\t\t\t\t<option value=\"\" disabled selected> Presets:</option>\n\t\t\t\t\t\t\t${optgroups}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\telse if (param === 'page') {\n\t\t\t\t\tconst options = _.map(pages, (path, page) => `<option value=\"${_.escape(page)}\">${_.escape(page)}</option>`);\n\t\t\t\t\treturn `\n\t\t\t\t\t\t<input type=\"text\" class=\"pick-string\" data-step-id=\"${step.id}\" data-param-name=\"page\" value=\"${step.params.page || ''}\">\n\t\t\t\t\t\t<select class=\"pick-page\">\n\t\t\t\t\t\t\t<option value=\"\" disabled selected> Pages:</option>\n\t\t\t\t\t\t\t${options}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\telse if (param === 'user') {\n\t\t\t\t\tconst options = _.map(users, (info, user) => `<option value=\"${_.escape(user)}\">${_.escape(user)}</option>`);\n\t\t\t\t\treturn `\n\t\t\t\t\t\t<input type=\"text\" class=\"pick-string\" data-step-id=\"${step.id}\" data-param-name=\"user\" value=\"${step.params.user || ''}\">\n\t\t\t\t\t\t<select class=\"pick-user\">\n\t\t\t\t\t\t\t<option value=\"\" disabled selected> Users:</option>\n\t\t\t\t\t\t\t${options}\n\t\t\t\t\t\t</select>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\telse if (param === 'element') {\n\t\t\t\t\tlet elemName = step.params.element || '<i class=\"icon icon-mouse-pointer\"></i> Choose element';\n\t\t\t\t\tlet className = step.params.element ? '-picked' : '';\n\t\t\t\t\treturn `\n\t\t\t\t\t<button class=\"pick-element js-pick-element ${className}\" data-step-id=\"${step.id}\" title=\"${step.params.element}\">\n\t\t\t\t\t\t${elemName}\n\t\t\t\t\t</button>`;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn param;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst prefix = step.prefix ? `${_.startCase(step.prefix)} ` : '';\n\n\t\t\treturn `\n\t\t\t\t<div class=\"step\" data-step-id=\"${step.id}\">\n\t\t\t\t\t${prefix}${text}\n\t\t\t\t\t<i class=\"copy-step icon-copy js-copy-step\" title=\"Duplicate this step\"></i>\n\t\t\t\t\t<i class=\"remove-step icon-close js-remove-step\" title=\"Remove this step\"></i>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tfunction copyText($iframe, $input) {\n\t\tvar success;\n\t\tvar window = $iframe.get(0).contentWindow;\n\n\t\t$input.get(0).select();\n\n\t\ttry {\n\t\t\tvar success = window.document.execCommand('copy');\n\t\t}\n\t\tcatch (error) {\n\t\t\tconsole.error(`Error copying: ${error}`);\n\t\t}\n\n\t\twindow.getSelection().removeAllRanges();\n\t}\n\n\tfunction bindUserEvents() {\n\n\t\tif (!attrName || !attrValueName) {\n\t\t\treturn;\n\t\t}\n\n\t\t/*\n\t\t\tText/file input\n\t\t */\n\n\t\t$(document).on(`change.${eventNamespace}`, `[${attrName}]:input, [${attrName}] :input`, function() {\n\n\t\t\t// Ignores non-textual/file inputs\n\t\t\tif (!$(this).is('input[type=\"text\"]') &&\n\t\t\t\t!$(this).is('input[type=\"email\"]') &&\n\t\t\t\t!$(this).is('input[type=\"password\"]') &&\n\t\t\t\t!$(this).is('input[type=\"date\"]') &&\n\t\t\t\t!$(this).is('input[type=\"number\"]') &&\n\t\t\t\t!$(this).is('input[type=\"file\"]') &&\n\t\t\t\t!$(this).is('textarea')\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isActive || !isRecording) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst $input = $(this);\n\t\t\tconst element = $input.closest(`[${attrName}]`).attr(attrName);\n\t\t\tlet value = $input.val();\n\n\t\t\tif ($input.is('[type=\"file\"]')) {\n\t\t\t\tvalue = value.replace('C:\\\\fakepath\\\\', '');\n\t\t\t}\n\n\t\t\taddStep('actions.set', { element, string: value });\n\t\t\tlastUserInteractionTime = Date.now();\n\t\t});\n\n\t\t/*\n\t\t\tSelect\n\t\t */\n\n\t\t$(document).on(`change.${eventNamespace}`, `select[${attrName}], [${attrName}] select`, function() {\n\t\t\tvar element = $(this).closest(`[${attrName}]`).attr(attrName);\n\t\t\tvar value = $(this).find('option:selected').text();\n\n\t\t\tif (isActive && isRecording) {\n\t\t\t\taddStep('actions.set', { element, string: value });\n\t\t\t\tlastUserInteractionTime = Date.now();\n\t\t\t}\n\t\t});\n\n\t\t/*\n\t\t\tCheckbox\n\t\t */\n\n\t\t$(document).on(`change.${eventNamespace}`, `[${attrName}]:checkbox, [${attrName}] :checkbox`, function() {\n\t\t\tvar element = $(this).closest(`[${attrName}]`).attr(attrName);\n\t\t\tvar value = $(this).attr(attrValueName) || ($(this).is(':checked') ? 'checked' : 'unchecked');\n\n\t\t\tif (isActive && isRecording) {\n\t\t\t\taddStep('actions.set', { element, string: value });\n\t\t\t\tlastUserInteractionTime = Date.now();\n\t\t\t}\n\t\t});\n\n\t\t/*\n\t\t\tRadio\n\t\t */\n\n\t\t$(document).on(`change.${eventNamespace}`, `[${attrName}]:radio, [${attrName}] :radio`, function() {\n\t\t\tvar element = $(this).closest(`[${attrName}]`).attr(attrName);\n\t\t\tvar value = $(this).attr(attrValueName) || $(this).filter(':checked').val();\n\n\t\t\tif (isActive && isRecording) {\n\t\t\t\taddStep('actions.set', { element, string: value });\n\t\t\t\tlastUserInteractionTime = Date.now();\n\t\t\t}\n\t\t});\n\n\t\t/*\n\t\t\tClick\n\t\t */\n\n\t\t$(document).on(`click.${eventNamespace}`, `[${attrName}]`, function() {\n\t\t\tconst containsInput = $(this).find(':input:visible').not('input[type=\"submit\"]').length > 0;\n\n\t\t\tif ($(this).is('input[type=\"text\"') ||\n\t\t\t\t$(this).is('input[type=\"email\"') ||\n\t\t\t\t$(this).is('input[type=\"password\"') ||\n\t\t\t\t$(this).is('input[type=\"date\"') ||\n\t\t\t\t$(this).is('input[type=\"number\"') ||\n\t\t\t\t$(this).is('input[type=\"checkbox\"') ||\n\t\t\t\t$(this).is('input[type=\"radio\"') ||\n\t\t\t\t$(this).is('input[type=\"file\"') ||\n\t\t\t\t$(this).is('textarea') ||\n\t\t\t\t$(this).is('select') ||\n\t\t\t\tcontainsInput\n\t\t\t) {\n\t\t\t\t// Click steps should not be generated for non-submit inputs\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isActive || !isRecording) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar element = $(this).attr(attrName);\n\t\t\taddStep('actions.click', { element });\n\t\t\tlastUserInteractionTime = Date.now();\n\t\t});\n\t}\n\n\tfunction unbindUserEvents() {\n\t\t$(document).off(`.${eventNamespace}`);\n\t}\n\n\tfunction addStylesheet() {\n\t\t$('head').append(`<style id=\"gherkin-scenario-builder-styles\">\n.--gherkin-scenario-builder-show-elements [${attrName}] {\n\toutline: 3px solid rgba(255, 0, 170, 0.75);\n\tcursor: pointer;\n}\n</style>`);\n\t}\n\n\tfunction removeStylesheet() {\n\t\t$('#gherkin-scenario-builder-styles').remove();\n\t}\n\n\tfunction updateStylesheet() {\n\t\tremoveStylesheet();\n\t\taddStylesheet();\n\t}\n\n\tfunction send(action, params, callback = () => {}) {\n\t\tchrome.runtime.sendMessage({ action: action, ...params }, callback);\n\t}\n\n\tfunction listen(action, callback) {\n\t\tlisteners[action] = listeners[action] || [];\n\t\tlisteners[action].push(callback);\n\t}\n\n\tchrome.runtime.onMessage.addListener((request, sender, sendResponse) => {\n\t\tfor (const listener of listeners[request.action]) {\n\t\t\tlistener(request);\n\t\t}\n\t});\n\n});\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel]  Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel]   ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\"></span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}